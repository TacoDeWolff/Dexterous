function api(b,c,d,a){if(!b){apiFatal("no API URL set")}else{$.ajax({type:(c==null?"GET":"POST"),url:b,data:c,dataType:"json",success:function(e){if(typeof e.error!=="undefined"){apiFatal(e.error.join("<br>"))}else{if(typeof d!=="undefined"&&d){applyTooltips();d(e)}}},error:function(e){if(typeof a!=="undefined"&&a){if(a(e)===false){return}}if(typeof e.responseJSON!=="undefined"&&typeof e.responseJSON["error"]!=="undefined"){apiFatal(e.responseJSON["error"].join("<br>"))}else{if(typeof e.responseText!=="undefined"){apiFatal(e.responseText)}else{if(typeof e.statusText!=="undefined"){apiFatal(e.statusText)}else{apiFatal(e)}}}}})}}function apiIdle(){$("#api_status i.fa-cog, #api_status i.fa-check, #api_status i.fa-times").stop(true).hide()}function apiBusy(){apiIdle();$("#api_status i.fa-cog").delay(800).fadeIn("fast")}function apiSuccess(a){apiIdle();$("#api_status i.fa-check").fadeIn("fast");if(typeof a!=="undefined"){$("#api_status i.fa-check").attr("data-tooltip",a)}}function apiError(a){apiIdle();$("#api_status i.fa-times").fadeIn("fast");if(typeof a!=="undefined"){$("#api_status i.fa-times").attr("data-tooltip",a)}}function apiFatal(a){$("#api_error_link").fancybox({closeBtn:false,beforeShow:function(){this.skin.css({background:"#F2DEDE",color:"#B94A48",border:"solid 1px #EED3D7"})},overlay:{closeClick:true,locked:false}}).click()};