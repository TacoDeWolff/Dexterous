function api(b,c,d,a){if(!b){apiError("no API URL set")}else{$.ajax({type:(c==null?"GET":"POST"),url:b,data:c,dataType:"json",success:function(e){if(typeof e.error!=="undefined"){apiError(e.error.join("<br>"))}else{if(typeof d!=="undefined"&&d){d(e)}}},error:function(e){if(typeof a!=="undefined"&&a){if(a(e)===false){return}}if(typeof e.responseJSON!=="undefined"&&typeof e.responseJSON["error"]!=="undefined"){apiError(e.responseJSON["error"].join("<br>"))}else{if(typeof e.responseText!=="undefined"){apiError(e.responseText)}else{if(typeof e.statusText!=="undefined"){apiError(e.statusText)}else{apiError(e)}}}}})}}function apiError(a){$("#api_error").html(a);$("#api_error_link").fancybox().click()};